<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>昶青考核管理系統</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600&display=swap" rel="stylesheet">
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
      /* ==== Global Glassmorphism Theme ==== */
      :root{
        --glass-bg: rgba(255,255,255,0.25);
        --glass-border: rgba(255,255,255,0.4);
        --glass-shadow: rgba(31,38,135,0.2);
        --primary: #4e9eff;
        --primary-dark: #3a74c7;
      }
      body{
        min-height:100vh;
        background: radial-gradient(circle at top left, #a8d8ff 0%, #e7f0ff 50%, #ffffff 100%);
        font-family:'Poppins',sans-serif;
        display:flex;
        align-items:flex-start;
        justify-content:center;
        padding-top:5rem;
      }
      .glass-card{
        background:var(--glass-bg);
        border:1px solid var(--glass-border);
        box-shadow:0 8px 32px 0 var(--glass-shadow);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-radius:1.5rem;
      }
      .brand-gradient{
        background:linear-gradient(135deg,#4e9eff 0%, #6fa8ff 50%, #9cc6ff 100%);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
      }
      /* buttons */
      .btn-brand{
        background-color:var(--primary);
        border:none;
        transition:all .25s ease;
      }
      .btn-brand:hover{
        background-color:var(--primary-dark);
        transform:translateY(-2px);
      }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav class="navbar fixed-top navbar-light bg-transparent">
     <div class="container-fluid">
        <span class="navbar-brand mb-0 h1 fw-bold brand-gradient">昶青考核管理系統</span>
     </div>
  </nav>

  <!-- Login Section -->
  <section id="loginSection" class="glass-card p-4 shadow-lg" style="max-width:420px;width:90%;">
      <h3 class="text-center mb-4">員工登入</h3>
      <form id="loginForm">
          <div class="mb-3">
              <label for="loginAccount" class="form-label">員工編號</label>
              <input type="text" class="form-control" id="loginAccount" placeholder="請輸入員工編號" required>
          </div>
          <div class="mb-4">
              <label for="loginPassword" class="form-label">密碼 (身分證字號)</label>
              <input type="password" class="form-control" id="loginPassword" placeholder="請輸入密碼" required>
          </div>
          <button type="submit" class="btn btn-brand w-100 py-2 fw-semibold">登入</button>
      </form>
      <div id="loginError" class="mt-3 text-danger text-center d-none">帳號或密碼錯誤</div>
  </section>

  <!-- Placeholder for other dynamic sections (notice, dashboard, evaluations ... ) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    /* ======= Minimal example of replacing google.script.run when hosting externally =======
       If you keep this HTML in Apps Script (HtmlService), google.script.run still works.
       If you plan to host on GitHub Pages, create REST endpoints in Apps Script and call them via fetch().
    */
    async function callLogin(){
      const payload = {
        account: document.getElementById('loginAccount').value.trim(),
        password: document.getElementById('loginPassword').value.trim()
      };
      // Example URL of your deployed Apps Script Web App (execute-as-me, access-anyone):
const url = 'https://script.google.com/macros/s/AKfycbyq6a5ngVyC6gtvx6BxofPm2nV8EziRyzuVu9CHS4CUbZdIMQj33V_MRPKwGMMlmOhe/exec';

      const res = await fetch(url,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(payload)
      });
      return res.json();
    }
    document.getElementById('loginForm').addEventListener('submit',async(e)=>{
      e.preventDefault();
      const result = await callLogin();
      if(result.success){
        // TODO: redirect or build dashboard
      }else{
        document.getElementById('loginError').classList.remove('d-none');
      }
    });
  </script>
</body>
</html>
